{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","src/index.ts","src/layouts/CardDirective.ts","src/layouts/DialogDirective.ts","src/layouts/DocumentDirective.ts","src/layouts/MainDirective.ts","src/layouts/SimpleDirective.ts","src/layouts/TilesDirective.ts","src/media/MediaService.ts","src/media/ResizeFunctions.ts"],"names":["f","exports","module","define","amd","g","window","global","self","this","pip","layouts","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","angular","__export","MediaService_1","cardDirective","$rootScope","restrict","$scope","$element","$attrs","CardDirectiveLink","$inject","_this","_element","_rootScope","_attrs","addClass","listener","resize","$on","MainResizedEvent","setTimeout","prototype","left","top","$mainBody","$","cardContainer","maxWidth","width","maxHeight","height","minWidth","Math","floor","minHeight","MainBreakpointStatuses","xs","space","min","css","hasClass","max","$header","find","$footer","$body","maxBodyHeight","outerHeight","$emit","directive","../media/MediaService","3","dialogDirective","4","documentDirective","5","ResizeFunctions_1","mainDirective","controller","MainDirectiveController","controllerAs","mainBodyDirective","link","MainBodyDirectiveLink","$timeout","_timeout","addResizeListener","removeResizeListener","updateBreakpointStatuses","innerWidth","body","update","MainBreakpoints","breakpoint","status","_","isBoolean","$apply","../media/ResizeFunctions","6","simpleDirective","7","tilesDirective","convertToBoolean","value","toString","toLowerCase","pipInfinite","String","tilesOptions","gutter","isFitWidth","isResizeBound","transitionDuration","TilesDirectiveLink","_columnWidth","columnWidth","_container","children","_prevContainerWidth","_masonry","Masonry","data","_sizer","appendTo","force","containerWidth","parent","log","columns","removeClass","layout","LayoutResizedEvent","8","MediaBreakpoints","sm","md","lg","MediaBreakpointStatuses","breakpoints","MediaProvider","defineProperty","enumerable","configurable","$get","service","size","set","get","provider","9","callback","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","frame","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","clearTimeout","id","cancel","resizeListener","event","win","target","srcElement","__resizeRAF__","cancelFrame","requestFrame","trigger","__resizeTrigger__","__resizeListeners__","forEach","fn","loadListener","contentDocument","defaultView","__resizeElement__","addEventListener","element","attachEvent","getComputedStyle","position","style","obj","document","createElement","setAttribute","onload","type","isIE","appendChild","push","splice","indexOf","detachEvent","removeEventListener","removeChild","navigator","userAgent","match"],"mappings":"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","file":"pip-webui-layouts.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\r\n\r\nangular.module('pipLayout', ['wu.masonry']);\r\n\r\nimport './media/MediaService';\r\nimport './media/ResizeFunctions';\r\n\r\nimport './layouts/MainDirective';\r\nimport './layouts/CardDirective';\r\nimport './layouts/DialogDirective';\r\nimport './layouts/DocumentDirective';\r\nimport './layouts/SimpleDirective';\r\nimport './layouts/TilesDirective';\r\n\r\nexport * from './media/MediaService';\r\nexport * from './media/ResizeFunctions';","'use strict';\r\n\r\nimport { MainResizedEvent, LayoutResizedEvent, MainBreakpointStatuses } from '../media/MediaService';\r\n\r\n// Avoid default export\r\n(() => {\r\n\r\nclass CardDirectiveLink {\r\n    private _element: any;\r\n    private _attrs: any;\r\n    private _rootScope: ng.IRootScopeService;\r\n\r\n    public constructor($rootScope: ng.IRootScopeService, $element: any, $attrs: any) {\r\n        this._element = $element;\r\n        this._rootScope = $rootScope;\r\n        this._attrs = $attrs;\r\n\r\n        // Add class to the element\r\n        $element.addClass('pip-card');\r\n\r\n        let listener = () => { this.resize(); }\r\n\r\n        // Resize every time window is resized\r\n        $rootScope.$on(MainResizedEvent, listener);\r\n\r\n        // Resize right away to avoid flicking\r\n        this.resize();\r\n\r\n        // Resize the element right away\r\n        setTimeout(listener, 100);\r\n    }\r\n\r\n    private resize() {\r\n        var\r\n            $mainBody = $('.pip-main-body'),\r\n            cardContainer = $('.pip-card-container'),\r\n            windowWidth = $('pip-main').width(),\r\n            maxWidth = $mainBody.width(),\r\n            maxHeight = $mainBody.height(),\r\n            minWidth = this._attrs.minWidth ? Math.floor(this._attrs.minWidth) : null,\r\n            minHeight = this._attrs.minHeight ? Math.floor(this._attrs.minHeight) : null,\r\n            width = this._attrs.width ? Math.floor(this._attrs.width) : null,\r\n            height = this._attrs.height ? Math.floor(this._attrs.height) : null,\r\n            left, top;\r\n\r\n        // Full-screen on phone\r\n        if (MainBreakpointStatuses.xs) {\r\n            minWidth = null;\r\n            minHeight = null;\r\n            width = null;\r\n            height = null;\r\n            maxWidth = null;\r\n            maxHeight = null;\r\n        }\r\n        // Card view with adjustable margins on tablet and desktop\r\n        else {\r\n            // Set margin and maximum dimensions\r\n            var space = MainBreakpointStatuses['gt-md'] ? 24 : 16;\r\n            maxWidth -= space * 2;\r\n            maxHeight -= space * 2;\r\n\r\n            // Set minimum dimensions\r\n            minWidth = minWidth ? Math.min(minWidth, maxWidth) : null;\r\n            minHeight = minHeight ? Math.min(minHeight, maxHeight) : null;\r\n\r\n            // Set regular dimensions\r\n            width = width ? Math.min(width, maxWidth) : null;\r\n            height = height ? Math.min(height, maxHeight) : null;\r\n        }\r\n\r\n        // Set dimensions\r\n        this._element.css('max-width', maxWidth ? maxWidth + 'px' : '');\r\n        this._element.css('min-width', minWidth ? minWidth + 'px' : '');\r\n        this._element.css('width', width ? width + 'px' : '');\r\n        this._element.css('height', height ? height + 'px' : '');\r\n\r\n        if (!cardContainer.hasClass('pip-outer-scroll')) {\r\n            this._element.css('max-height', maxHeight ? maxHeight + 'px' : '');\r\n            this._element.css('min-height', minHeight ? minHeight + 'px' : '');\r\n            var\r\n                $header = this._element.find('.pip-header:visible'),\r\n                $footer = this._element.find('.pip-footer:visible'),\r\n                $body = this._element.find('.pip-body'),\r\n                maxBodyHeight = maxHeight || $mainBody.height();\r\n\r\n            if ($header.length > 0)\r\n                maxBodyHeight -= $header.outerHeight(true);\r\n            if ($footer.length > 0)\r\n                maxBodyHeight -= $footer.outerHeight(true);\r\n\r\n            $body.css('max-height', maxBodyHeight + 'px');\r\n        } else {\r\n            cardContainer.addClass('pip-scroll');\r\n            if (MainBreakpointStatuses.xs) {\r\n                left = 0;\r\n                top = 0;\r\n            } else {\r\n                left = cardContainer.width() / 2 - this._element.width() / 2 - 16;\r\n                top = Math.max(cardContainer.height() / 2 - this._element.height() / 2 - 16, 0);\r\n            }\r\n\r\n            this._element.css('left', left);\r\n            this._element.css('top', top);\r\n\r\n            setTimeout(() => { this._element.css('display', 'flex'); }, 100);\r\n        }\r\n\r\n        // Notify child controls that layout was resized\r\n        this._rootScope.$emit('pipLayoutResized');\r\n    }\r\n}\r\n\r\nfunction cardDirective($rootScope: ng.IRootScopeService) {\r\n    \"ngInject\";\r\n\r\n    return {\r\n        restrict: 'EA',\r\n        link: ($scope, $element, $attrs) => {\r\n            new CardDirectiveLink($rootScope, $element, $attrs);\r\n        }\r\n    }\r\n}\r\n\r\n\r\nangular\r\n    .module('pipLayout')\r\n    .directive('pipCard', cardDirective);\r\n\r\n})();","'use strict';\r\n\r\n// Avoid default export\r\n(() => {\r\n\r\nfunction dialogDirective() {\r\n    return {\r\n        restrict: 'EA',\r\n        link: ($scope, $element, $attrs) => {\r\n            $element.addClass('pip-dialog');\r\n        }\r\n    };\r\n}\r\n\r\nangular\r\n    .module('pipLayout')\r\n    .directive('pipDialog', dialogDirective);\r\n\r\n})();","'use strict';\r\n\r\n// Avoid default export\r\n(() => {\r\n\r\nfunction documentDirective() {\r\n    return {\r\n        restrict: 'EA',\r\n        link: ($scope, $element, $attrs) => {\r\n            $element.addClass('pip-document');\r\n        }\r\n    };\r\n}\r\n\r\nangular\r\n    .module('pipLayout')\r\n    .directive('pipDocument', documentDirective);\r\n\r\n})();","'use strict';\r\n\r\nimport { addResizeListener, removeResizeListener } from '../media/ResizeFunctions';\r\nimport { MainBreakpoints, MainBreakpointStatuses, MainResizedEvent } from '../media/MediaService'; \r\n\r\n// Avoid default export\r\n(() => {\r\n\r\nclass MainDirectiveController {\r\n    private _element: any;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _timeout: ng.ITimeoutService;\r\n\r\n    public constructor(\r\n        $scope: ng.IScope, \r\n        $element: any, \r\n        $rootScope: ng.IRootScopeService,\r\n        $timeout: ng.ITimeoutService\r\n    ) {\r\n        this._element = $element;        \r\n        this._rootScope = $rootScope;\r\n        this._timeout = $timeout;\r\n\r\n        // Add CSS class\r\n        $element.addClass('pip-main');\r\n\r\n        // Add resize listener\r\n        let listener = () => { this.resize(); };\r\n        addResizeListener($element[0], listener);\r\n\r\n        // Unbind when scope is removed\r\n        $scope.$on('$destroy', () => {\r\n            removeResizeListener($element[0], listener);\r\n        });\r\n\r\n        // Perform initial calculations\r\n        this.updateBreakpointStatuses();\r\n    }\r\n\r\n    private updateBreakpointStatuses() {\r\n        let width = this._element.innerWidth();\r\n        let body = $('body');\r\n\r\n        MainBreakpointStatuses.update(MainBreakpoints, width);\r\n\r\n        $.each(MainBreakpointStatuses, (breakpoint, status) => {\r\n            if (_.isBoolean(status))\r\n                body[status ? 'addClass': 'removeClass']('pip-' + breakpoint);\r\n        });\r\n\r\n        this._timeout(() => {\r\n            this._rootScope.$apply();\r\n        });\r\n    }\r\n    \r\n    private resize() {\r\n        this.updateBreakpointStatuses();\r\n        this._rootScope.$emit(MainResizedEvent, MainBreakpointStatuses);\r\n    }\r\n}\r\n\r\nclass MainBodyDirectiveLink {\r\n    public constructor(\r\n        $scope: ng.IScope, \r\n        $element: any\r\n    ) {\r\n        // Add CSS class\r\n        $element.addClass('pip-main-body');\r\n    }\r\n}\r\n\r\nfunction mainDirective() {\r\n    return {\r\n        restrict: 'EA',\r\n        controller: MainDirectiveController,\r\n        controllerAs: 'vm' \r\n    }\r\n}\r\n\r\nfunction mainBodyDirective() {\r\n    return {\r\n        restrict: 'EA',\r\n        link: MainBodyDirectiveLink\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipLayout')\r\n    .directive('pipMain', mainDirective)\r\n    .directive('pipMainBody', mainBodyDirective);\r\n\r\n})();","'use strict';\r\n\r\n// Avoid default export\r\n(() => {\r\n\r\nfunction simpleDirective() {\r\n    return {\r\n        restrict: 'EA',\r\n        link: ($scope, $element, $attrs) => {\r\n            $element.addClass('pip-simple');\r\n        }\r\n    };\r\n}\r\n\r\nangular\r\n    .module('pipLayout')\r\n    .directive('pipSimple', simpleDirective);\r\n\r\n})();","'use strict';\r\n\r\nimport { addResizeListener, removeResizeListener } from '../media/ResizeFunctions';\r\nimport { MainResizedEvent, LayoutResizedEvent, MainBreakpoints, MainBreakpointStatuses } from '../media/MediaService';\r\n\r\ndeclare var Masonry: any;\r\n\r\nclass TilesDirectiveLink {\r\n    private _element: any;\r\n    private _attrs: any;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _columnWidth: number;\r\n    private _container: any;\r\n    private _prevContainerWidth: number;\r\n    private _masonry: any;\r\n    private _sizer: any;\r\n\r\n    public constructor($scope: ng.IScope, $element: any, $rootScope: ng.IRootScopeService, $attrs: any) {\r\n        this._element = $element;\r\n        this._rootScope = $rootScope;\r\n        this._attrs = $attrs;\r\n\r\n        this._columnWidth = $attrs.columnWidth ? Math.floor($attrs.columnWidth) : 440,\r\n        this._container = $element.children('.pip-tiles-container'),\r\n        this._prevContainerWidth = null,\r\n        this._masonry = Masonry.data(this._container[0]);\r\n        \r\n        // Add class to the element\r\n        $element.addClass('pip-tiles');\r\n\r\n        // Add resize listener\r\n        let listener = () => { this.resize(false); };\r\n        addResizeListener($element[0], listener);\r\n\r\n        // Unbind when scope is removed\r\n        $scope.$on('$destroy', () => {\r\n            removeResizeListener($element[0], listener);\r\n        });\r\n\r\n        // Insert sizer\r\n        this._sizer = $('<div class=\"pip-tile-sizer\"></div>');\r\n        this._sizer.appendTo(this._container);\r\n\r\n        // Resize every time window is resized\r\n        $rootScope.$on(MainResizedEvent, () => { this.resize(false); });\r\n\r\n        // Resize the element right away\r\n        this.resize(true);\r\n    }\r\n\r\n    private resize(force: boolean) {\r\n        let width = this._element.parent().width();\r\n        let containerWidth;\r\n        \r\n        console.log();\r\n\r\n        if (MainBreakpointStatuses['gt-xs'] && (width - 36) > this._columnWidth) {\r\n            width = width - 24 * 2;\r\n\r\n            let columns = Math.floor(width / this._columnWidth);\r\n            containerWidth = (this._columnWidth + 16) * columns - 16;\r\n\r\n            if (containerWidth > width) {\r\n                columns--;\r\n                containerWidth = (this._columnWidth + 16) * columns - 16;\r\n            }\r\n\r\n            if (columns < 1) {\r\n                containerWidth = width;\r\n                this._sizer.css('width', containerWidth + 'px');\r\n            } else {\r\n                this._sizer.css('width', this._columnWidth + 'px');\r\n            }\r\n\r\n            // +10 to avoid precision related error\r\n            this._container.css('width', (containerWidth + 10) + 'px');\r\n            this._container.removeClass('pip-mobile');\r\n        } else {\r\n            width = width - 16 * 2;\r\n            containerWidth = width;\r\n\r\n            this._sizer.css('width', containerWidth + 'px');\r\n            // +10 to avoid precision related error\r\n            this._container.css('width', (containerWidth + 10) + 'px');\r\n            this._container.addClass('pip-mobile');\r\n        }\r\n\r\n        // Manually call layout on tile container\r\n        if (this._prevContainerWidth != containerWidth || force) {\r\n            this._prevContainerWidth = containerWidth;\r\n            this._masonry.layout();\r\n\r\n            // Notify child controls that layout was resized\r\n            this._rootScope.$emit(LayoutResizedEvent);\r\n        }\r\n    }\r\n}\r\n\r\nfunction tilesDirective($rootScope: ng.IRootScopeService) {\r\n    \"ngInject\";\r\n\r\n    // Converts value into boolean\r\n    function convertToBoolean(value) {\r\n        if (value == null) return false;\r\n        if (!value) return false;\r\n        value = value.toString().toLowerCase();\r\n        return value == '1' || value == 'true';\r\n    }\r\n\r\n    return {\r\n        restrict: 'EA',\r\n        scope: false,\r\n        transclude: true,\r\n        template:\r\n            ($element: any, $attrs: any) => {\r\n                if (convertToBoolean($attrs.pipInfinite)) {\r\n                    return String()\r\n                    + '<div masonry class=\"pip-tiles-container\" load-images=\"false\" preserve-order  '\r\n                    + ' ng-transclude column-width=\".pip-tile-sizer\" item-selector=\".pip-tile\"'\r\n                    + ' masonry-options=\"tilesOptions\"  pip-scroll-container=\"\\'.pip-tiles\\'\"'\r\n                    + ' pip-infinite-scroll=\"readScroll()\" >'\r\n                    + '</div>';\r\n                } else {\r\n                    return String()\r\n                        + '<div masonry class=\"pip-tiles-container\" load-images=\"false\" preserve-order  '\r\n                        + ' ng-transclude column-width=\".pip-tile-sizer\" item-selector=\".pip-tile\"'\r\n                        + ' masonry-options=\"tilesOptions\">'\r\n                        + '</div>';\r\n                }\r\n            },\r\n        controller: ($scope: any) => {\r\n            $scope.tilesOptions = {\r\n                gutter: 8,//16\r\n                isFitWidth: false,\r\n                isResizeBound: false,\r\n                transitionDuration: 0 // '0.2s'\r\n            };\r\n        },\r\n        link: ($scope, $element, $attrs) => {\r\n            new TilesDirectiveLink($scope, $element, $rootScope, $attrs);\r\n        } \r\n    };\r\n}\r\n\r\nangular\r\n    .module('pipLayout')\r\n    .directive('pipTiles', tilesDirective);\r\n","'use strict';\r\n\r\nexport class MediaBreakpoints {\r\n    public constructor(\r\n        xs: number, sm: number, md: number, lg: number\r\n    ) {\r\n        this.xs = xs;\r\n        this.sm = sm;\r\n        this.md = md;\r\n        this.lg = lg;\r\n    }\r\n\r\n    public xs: number;\r\n    public sm: number;\r\n    public md: number;\r\n    public lg: number;\r\n}\r\n\r\nexport class MediaBreakpointStatuses {\r\n    public width: number;\r\n    public 'xs': boolean;\r\n    public 'gt-xs': boolean;\r\n    public 'sm': boolean;\r\n    public 'gt-sm': boolean;\r\n    public 'md': boolean;\r\n    public 'gt-md': boolean;\r\n    public 'lg': boolean;\r\n    public 'gt-lg': boolean;\r\n    public 'xl': boolean;\r\n\r\n    public update(breakpoints: MediaBreakpoints, width: number) {\r\n        if (breakpoints == null) return;\r\n\r\n        this.width = width;\r\n        this['xs'] = width <= breakpoints.xs;\r\n        this['gt-xs'] = width > breakpoints.xs;\r\n        this['sm'] = width > breakpoints.xs && width <= breakpoints.sm;\r\n        this['gt-sm'] = width > breakpoints.sm;\r\n        this['md'] = width > breakpoints.sm && width <= breakpoints.md;\r\n        this['gt-md'] = width > breakpoints.md;\r\n        this['lg'] = width > breakpoints.md && width <= breakpoints.lg;\r\n        this['gt-lg'] = width > breakpoints.lg;\r\n        this['xl'] = this['gt-lg'];\r\n    }\r\n}\r\n\r\nexport let MainResizedEvent: string = 'pipMainResized';\r\nexport let LayoutResizedEvent: string = 'pipLayoutResized';\r\n\r\nexport let MainBreakpoints: MediaBreakpoints = new MediaBreakpoints(639, 959, 1024, 1919);\r\nexport let MainBreakpointStatuses: MediaBreakpointStatuses = new MediaBreakpointStatuses();\r\n\r\nexport interface IMediaService {\r\n    (breakpoint: string): boolean;\r\n    breakpoints: MediaBreakpoints;\r\n    width: number;\r\n} \r\n\r\nexport interface IMediaProvider extends ng.IServiceProvider {\r\n    breakpoints: MediaBreakpoints;\r\n}\r\n\r\nclass MediaProvider {\r\n    public get breakpoints(): MediaBreakpoints {\r\n        return MainBreakpoints;\r\n    }\r\n\r\n    public set breakpoints(value: MediaBreakpoints) {\r\n        MainBreakpoints = value;\r\n    }\r\n\r\n    public $get() {\r\n        let service = function(size) {\r\n            return MainBreakpointStatuses[size];\r\n        }\r\n\r\n        Object.defineProperty(service, 'breakpoints', {\r\n            get: () => { return MainBreakpoints; },\r\n            set: (value) => { \r\n                MainBreakpoints = value || new MediaBreakpoints(639, 959, 1024, 1919);\r\n                \r\n                MainBreakpointStatuses.update(\r\n                    MainBreakpoints, \r\n                    MainBreakpointStatuses.width\r\n                );\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(service, 'width', {\r\n            get: () => { \r\n                return MainBreakpointStatuses.width; \r\n            }\r\n        });\r\n\r\n        return service; \r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipLayout')\r\n    .provider('pipMedia', MediaProvider);\r\n","'use strict';\r\n\r\nlet attachEvent = (<any>document).attachEvent;\r\nlet isIE = navigator.userAgent.match(/Trident/);\r\n\r\nfunction requestFrame(callback): any {\r\n    let frame = window.requestAnimationFrame \r\n        || (<any>window).mozRequestAnimationFrame \r\n        || (<any>window).webkitRequestAnimationFrame \r\n        || function(callback) { \r\n            return window.setTimeout(callback, 20);     \r\n        };\r\n\r\n    return frame(callback);\r\n}\r\n\r\nfunction cancelFrame(): any {\r\n    let cancel = window.cancelAnimationFrame \r\n        || (<any>window).mozCancelAnimationFrame \r\n        || (<any>window).webkitCancelAnimationFrame \r\n        || window.clearTimeout;\r\n\r\n    return function(id) { \r\n        return cancel(id); \r\n    };\r\n}\r\n\r\nfunction resizeListener(event: any): void {\r\n    var win = event.target || event.srcElement;\r\n    if (win.__resizeRAF__) cancelFrame(/*win.__resizeRAF__*/);\r\n    win.__resizeRAF__ = requestFrame(function() {\r\n        var trigger = win.__resizeTrigger__;\r\n        trigger.__resizeListeners__.forEach(function(fn){\r\n            fn.call(trigger, event);\r\n        });\r\n    });\r\n}\r\n\r\nfunction loadListener(event: any): void {\r\n    this.contentDocument.defaultView.__resizeTrigger__ = this.__resizeElement__;\r\n    this.contentDocument.defaultView.addEventListener('resize', resizeListener);\r\n}\r\n\r\nexport function addResizeListener(element, listener): void {\r\n    if (!element.__resizeListeners__) {\r\n        element.__resizeListeners__ = [];\r\n        if (attachEvent) {\r\n            element.__resizeTrigger__ = element;\r\n            element.attachEvent('onresize', resizeListener);\r\n        }\r\n        else {\r\n            if (getComputedStyle(element).position == 'static') element.style.position = 'relative';\r\n            var obj: any = element.__resizeTrigger__ = document.createElement('object');\r\n            obj.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;');\r\n            obj.__resizeElement__ = element;\r\n            obj.onload = loadListener;\r\n            obj.type = 'text/html';\r\n            if (isIE) element.appendChild(obj);\r\n            obj.data = 'about:blank';\r\n            if (!isIE) element.appendChild(obj);\r\n        }\r\n    }\r\n\r\n    element.__resizeListeners__.push(listener);\r\n}\r\n\r\nexport function removeResizeListener(element, listener): void {\r\n    if (listener) element.__resizeListeners__.splice(element.__resizeListeners__.indexOf(listener), 1);\r\n    if (!element.__resizeListeners__.length) {\r\n        if (attachEvent) element.detachEvent('onresize', resizeListener);\r\n        else {\r\n            element.__resizeTrigger__.contentDocument.defaultView.removeEventListener('resize', resizeListener);\r\n            element.__resizeTrigger__ = !element.removeChild(element.__resizeTrigger__);\r\n        }\r\n    }\r\n}\r\n"]}