{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","src/card/card.ts","src/dialog/dialog.ts","src/document/document.ts","src/layouts.ts","src/main/main.ts","src/media/media.ts","src/simple/simple.ts","src/tiles/tiles.ts"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","thisModule","angular","directive","restrict","link","$scope","$element","$attrs","resize","left","top","$mainBody","$","cardContainer","windowWidth","width","maxWidth","maxHeight","height","minWidth","Math","floor","minHeight","space","min","css","hasClass","addClass","max","setTimeout","$header","find","$footer","$body","maxBodyHeight","outerHeight","$broadcast","$on","controller","$rootScope","pipMedia","window","addResizeListener","removeResizeListener","service","$timeout","getBoundaries","size","boundaries","requestFrame","fn","raf","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","cancelFrame","cancel","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","clearTimeout","id","resizeListener","win","target","srcElement","__resizeRAF__","trigger","__resizeTrigger__","__resizeListeners__","forEach","objectLoad","this","contentDocument","defaultView","__resizeElement__","addEventListener","element","attachEvent","getComputedStyle","position","style","obj","document","createElement","setAttribute","onload","type","isIE","appendChild","data","setSizes","push","splice","indexOf","detachEvent","removeEventListener","removeChild","updateClasses","each","sizes","name","elementWidth","innerWidth","$apply","xs","gt-xs","sm","gt-sm","md","gt-md","lg","gt-lg","xl","navigator","userAgent","match","pipTilesController","force","containerWidth","console","log","columns","columnWidth","sizer","container","removeClass","prevContainerWidth","masonry","layout","children","Masonry","appendTo","convertToBoolean","value","toString","toLowerCase","scope","transclude","template","pipInfinite","String","tilesOptions","gutter","isFitWidth","isResizeBound","transitionDuration"],"mappings":"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","file":"pip-webui-layouts.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/**\r\n * @file Card layout\r\n * @copyright Digital Living Software Corp. 2014-2015\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipLayout.Card', []);\r\n\r\n    thisModule.directive('pipCard', function() {\r\n        return {\r\n           restrict: 'EA',\r\n           //controller: 'pipCardController'\r\n            link: function($scope: any, $element, $attrs: any) {\r\n                // Add class to the element\r\n                $element.addClass('pip-card');\r\n\r\n                // Resize every time window is resized\r\n                $scope.$on('pipWindowResized', resize);\r\n\r\n                // Resize right away to avoid flicking\r\n                resize();\r\n\r\n                // Resize the element right away\r\n                setTimeout(resize, 100);\r\n\r\n                return;\r\n\r\n                //---------------\r\n\r\n                function resize() {\r\n                    var\r\n                        $mainBody = $('.pip-main-body'),\r\n                        cardContainer = $('.pip-card-container'),\r\n                        windowWidth = $('pip-main').width(),\r\n                        maxWidth = $mainBody.width(),\r\n                        maxHeight = $mainBody.height(),\r\n                        minWidth = $attrs.minWidth ? Math.floor($attrs.minWidth) : null,\r\n                        minHeight = $attrs.minHeight ? Math.floor($attrs.minHeight) : null,\r\n                        width = $attrs.width ? Math.floor($attrs.width) : null,\r\n                        height = $attrs.height ? Math.floor($attrs.height) : null,\r\n                        left, top;\r\n\r\n                    // Full-screen on phone\r\n                    if (windowWidth <= 768) {\r\n                        minWidth = null;\r\n                        minHeight = null;\r\n                        width = null;\r\n                        height = null;\r\n                        maxWidth = null;\r\n                        maxHeight = null;\r\n                    }\r\n                    // Card view with adjustable margins on tablet and desktop\r\n                    else {\r\n                        // Set margin and maximum dimensions\r\n                        var space = windowWidth > 1200 ? 24 : 16;\r\n                        maxWidth -= space * 2;\r\n                        maxHeight -= space * 2;\r\n\r\n                        // Set minimum dimensions\r\n                        minWidth = minWidth ? Math.min(minWidth, maxWidth) : null;\r\n                        minHeight = minHeight ? Math.min(minHeight, maxHeight) : null;\r\n\r\n                        // Set regular dimensions\r\n                        width = width ? Math.min(width, maxWidth) : null;\r\n                        height = height ? Math.min(height, maxHeight) : null;\r\n                    }\r\n\r\n                    // Set dimensions\r\n                    $element.css('max-width', maxWidth ? maxWidth + 'px' : '');\r\n                    $element.css('min-width', minWidth ? minWidth + 'px' : '');\r\n                    $element.css('width', width ? width + 'px' : '');\r\n                    $element.css('height', height ? height + 'px' : '');\r\n\r\n                    if (!cardContainer.hasClass('pip-outer-scroll'))\r\n                    {\r\n                        $element.css('max-height', maxHeight ? maxHeight + 'px' : '');\r\n                        $element.css('min-height', minHeight ? minHeight + 'px' : '');\r\n                        var\r\n                            $header = $element.find('.pip-header:visible'),\r\n                            $footer = $element.find('.pip-footer:visible'),\r\n                            $body = $element.find('.pip-body'),\r\n                            maxBodyHeight = maxHeight || $mainBody.height();\r\n\r\n                        if ($header.length > 0)\r\n                            maxBodyHeight -= $header.outerHeight(true);\r\n                        if ($footer.length > 0)\r\n                            maxBodyHeight -= $footer.outerHeight(true);\r\n\r\n                        $body.css('max-height', maxBodyHeight + 'px');\r\n                    } else {\r\n                        cardContainer.addClass('pip-scroll');\r\n                        if (windowWidth <= 768) {\r\n                            left = 0;\r\n                            top = 0;\r\n                        } else {\r\n                            left = cardContainer.width() / 2 - $element.width() / 2 - 16;\r\n                            top = Math.max(cardContainer.height() / 2 - $element.height() / 2 - 16, 0);\r\n                        }\r\n\r\n                        $element.css('left', left);\r\n                        $element.css('top', top);\r\n                        setTimeout(function () {\r\n                            $element.css('display', 'flex');\r\n                        }, 100);\r\n                    }\r\n\r\n                    // Notify child controls that layout was resized\r\n                    $scope.$broadcast('pipLayoutResized');\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n})();\r\n","/**\r\n * @file Dialog layout\r\n * @copyright Digital Living Software Corp. 2014-2015\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipLayout.Dialog', []);\r\n\r\n    thisModule.directive('pipDialog', function() {\r\n        return {\r\n           restrict: 'EAC',\r\n           controller: 'pipDialogController'\r\n        };\r\n    });\r\n\r\n    thisModule.controller('pipDialogController', \r\n        function($element, $attrs) {\r\n            // Add class to the element\r\n            $element.addClass('pip-dialog');\r\n            // Set width\r\n            $element.css('width', $attrs.width);\r\n\r\n            return;\r\n        }\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Document layout\r\n * @copyright Digital Living Software Corp. 2014-2015\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipLayout.Document', []);\r\n\r\n    thisModule.directive('pipDocument', function() {\r\n        return {\r\n           restrict: 'EA',\r\n           controller: 'pipDocumentController'\r\n        };\r\n    });\r\n\r\n    thisModule.controller('pipDocumentController', \r\n        function($scope, $element, $attrs) {\r\n            // Add class to the element\r\n            $element.addClass('pip-document');\r\n        }\r\n    );    \r\n\r\n})();\r\n","/**\r\n * @file Registration of all application layouts\r\n * @copyright Digital Living Software Corp. 2014-2015\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipLayout', [\r\n        'pipLayout.Main', 'pipLayout.Simple', 'pipLayout.Card', 'pipLayout.Document',\r\n        'pipLayout.Tiles', 'pipLayout.Dialog', 'pipLayout.Media'\r\n    ]);\r\n\r\n})();\r\n","/**\r\n * @file Top-level application container\r\n * @copyright Digital Living Software Corp. 2014-2015\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipLayout.Main', []);\r\n\r\n    thisModule.directive('pipMain', function() {\r\n        return {\r\n           restrict: 'EA',\r\n           controller: 'pipMainController' \r\n        }\r\n    });\r\n\r\n    thisModule.directive('pipMainBody', function() {\r\n       return {\r\n           restrict: 'EA',\r\n           link: function($scope, $element) {\r\n                $element.addClass('pip-main-body');\r\n           }\r\n       };\r\n    });\r\n\r\n    thisModule.controller('pipMainController',\r\n        function($scope, $element, $rootScope, pipMedia) {\r\n            var $window: any = $(window);\r\n\r\n            // Add CSS class\r\n            $element.addClass('pip-main');\r\n\r\n            pipMedia().addResizeListener($element[0], resize);\r\n\r\n            // Handle window resize events\r\n            //$window.bind('resize', resize);\r\n\r\n            // Unbind when scope is removed\r\n            $scope.$on('$destroy', function() {\r\n                pipMedia().removeResizeListener($element[0]);\r\n                //$window.unbind('resize', resize);\r\n            });\r\n\r\n            // Resize window from request\r\n            //$rootScope.$on('pipResizeWindow', function(event) {\r\n            //    // Trigger a bit latter t allow full initialization\r\n            //    // Do not remove! Otherwise, sizes in layouts calculated incorrectly\r\n            //    setTimeout(resize, 0);\r\n            //});\r\n\r\n            // Allow to finish initialization of all controllers\r\n            //setTimeout(resize, 0);\r\n\r\n            return;\r\n            \r\n            //---------------\r\n\r\n            function resize() {\r\n                $rootScope.$broadcast('pipWindowResized');\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","import size = require(\"lodash/size\");\r\n/**\r\n * @file Media service to detect the width of pip-main container\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipLayout.Media', []);\r\n\r\n    thisModule.service('pipMedia',\r\n        function ($rootScope, $timeout) {\r\n\r\n            var elementWidth = null,\r\n                sizes = {\r\n                    'xs': false,\r\n                    'gt-xs': false,\r\n                    'sm': false,\r\n                    'gt-sm': false,\r\n                    'md': false,\r\n                    'gt-md': false,\r\n                    'lg': false,\r\n                    'gt-lg': false,\r\n                    'xl': false\r\n                },\r\n                boundaries = {\r\n                    'xs': [0, 768],\r\n                    'sm': [769, 1199],\r\n                    'md': [1200, 1399],\r\n                    'lg': [1400, 1919],\r\n                    'xl': [1920, '-']\r\n                },\r\n                attachEvent = (<any>document).attachEvent,\r\n                isIE = navigator.userAgent.match(/Trident/);\r\n            \r\n            return function (size) {\r\n                if (size) {\r\n                    return sizes[size];\r\n                } else {\r\n                    return {\r\n                        addResizeListener: addResizeListener,\r\n                        removeResizeListener: removeResizeListener,\r\n                        getBoundaries: getBoundaries\r\n                    };\r\n                }\r\n            };\r\n\r\n            function getBoundaries (size) {\r\n                return boundaries[size];\r\n            }\r\n\r\n            function requestFrame(fn) {\r\n                var raf = window.requestAnimationFrame || (<any>window).mozRequestAnimationFrame || (<any>window).webkitRequestAnimationFrame ||\r\n                    function(fn){ return window.setTimeout(fn, 20); };\r\n\r\n                return raf(fn);\r\n            }\r\n\r\n            function cancelFrame() {\r\n                var cancel = window.cancelAnimationFrame || (<any>window).mozCancelAnimationFrame || (<any>window).webkitCancelAnimationFrame ||\r\n                    window.clearTimeout;\r\n                return function(id){ return cancel(id); };\r\n            }\r\n\r\n            function resizeListener(e) {\r\n                var win = e.target || e.srcElement;\r\n                if (win.__resizeRAF__) cancelFrame(/*win.__resizeRAF__*/);\r\n                win.__resizeRAF__ = requestFrame(function(){\r\n                    var trigger = win.__resizeTrigger__;\r\n                    trigger.__resizeListeners__.forEach(function(fn){\r\n                        fn.call(trigger, e);\r\n                    });\r\n                });\r\n            }\r\n\r\n            function objectLoad(e) {\r\n                this.contentDocument.defaultView.__resizeTrigger__ = this.__resizeElement__;\r\n                this.contentDocument.defaultView.addEventListener('resize', resizeListener);\r\n            }\r\n\r\n            function addResizeListener(element, fn) {\r\n                if (!element.__resizeListeners__) {\r\n                    element.__resizeListeners__ = [];\r\n                    if (attachEvent) {\r\n                        element.__resizeTrigger__ = element;\r\n                        element.attachEvent('onresize', resizeListener);\r\n                    }\r\n                    else {\r\n                        if (getComputedStyle(element).position == 'static') element.style.position = 'relative';\r\n                        var obj: any = element.__resizeTrigger__ = document.createElement('object');\r\n                        obj.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;');\r\n                        obj.__resizeElement__ = element;\r\n                        obj.onload = objectLoad;\r\n                        obj.type = 'text/html';\r\n                        if (isIE) element.appendChild(obj);\r\n                        obj.data = 'about:blank';\r\n                        if (!isIE) element.appendChild(obj);\r\n                    }\r\n                }\r\n                setSizes();\r\n                if (fn) element.__resizeListeners__.push(fn);\r\n                element.__resizeListeners__.push(setSizes);\r\n            }\r\n\r\n            function removeResizeListener(element, fn) {\r\n                if (fn) element.__resizeListeners__.splice(element.__resizeListeners__.indexOf(fn), 1);\r\n                if (!element.__resizeListeners__.length) {\r\n                    if (attachEvent) element.detachEvent('onresize', resizeListener);\r\n                    else {\r\n                        element.__resizeTrigger__.contentDocument.defaultView.removeEventListener('resize', resizeListener);\r\n                        element.__resizeTrigger__ = !element.removeChild(element.__resizeTrigger__);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function updateClasses() {\r\n                $.each(sizes, function (name, size) {\r\n                    $('body')[size ? 'addClass': 'removeClass']('pip-' + name);\r\n                });\r\n            }\r\n\r\n            function setSizes() {\r\n                elementWidth = $('.pip-main').innerWidth();\r\n                sizes['xs'] = elementWidth <= boundaries['xs'][1];\r\n                sizes['gt-xs'] = elementWidth >= boundaries['sm'][0];\r\n                sizes['sm'] = elementWidth >= boundaries['sm'][0] && elementWidth <= boundaries['sm'][1];\r\n                sizes['gt-sm'] = elementWidth >= boundaries['md'][0];\r\n                sizes['md'] = elementWidth >= boundaries['md'][0] && elementWidth <= boundaries['md'][1];\r\n                sizes['gt-md'] = elementWidth >= boundaries['lg'][0];\r\n                sizes['lg'] = elementWidth >= boundaries['lg'][0] && elementWidth <= boundaries['lg'][1];\r\n                sizes['gt-lg'] = elementWidth >= boundaries['xl'][0];\r\n                sizes['xl'] = sizes['gt-lg'];\r\n\r\n                updateClasses();\r\n\r\n                $timeout(function () {\r\n                    $rootScope.$apply();\r\n                });\r\n            }\r\n\r\n        }\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Simple layout\r\n * @copyright Digital Living Software Corp. 2014-2015\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipLayout.Simple', []);\r\n\r\n    thisModule.directive('pipSimple', function() {\r\n       return {\r\n           restrict: 'EA',\r\n           link: function($scope, $element, $attrs) {\r\n                $element.addClass('pip-simple');\r\n           }\r\n       };\r\n    });\r\n\r\n})();\r\n","/**\r\n * @file Tiles layout\r\n * @copyright Digital Living Software Corp. 2014-2015\r\n */\r\n\r\n/* global $, angular, Masonry */\r\n\r\ndeclare var Masonry: any;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipLayout.Tiles', ['wu.masonry']);\r\n\r\n    thisModule.directive('pipTiles', function() {\r\n       return {\r\n           restrict: 'EA',\r\n           scope: false,\r\n           transclude: true,\r\n           template:\r\n               function($element, $attrs: any) {\r\n                   if (convertToBoolean($attrs.pipInfinite)) {\r\n                       return  String()\r\n                       + '<div masonry class=\"pip-tiles-container\" load-images=\"false\" preserve-order  '\r\n                       + ' ng-transclude column-width=\".pip-tile-sizer\" item-selector=\".pip-tile\"'\r\n                       + ' masonry-options=\"tilesOptions\"  pip-scroll-container=\"\\'.pip-tiles\\'\"'\r\n                       + ' pip-infinite-scroll=\"readScroll()\" >'\r\n                       + '</div>';\r\n                   } else {\r\n                       return String()\r\n                           + '<div masonry class=\"pip-tiles-container\" load-images=\"false\" preserve-order  '\r\n                           + ' ng-transclude column-width=\".pip-tile-sizer\" item-selector=\".pip-tile\"'\r\n                           + ' masonry-options=\"tilesOptions\">'\r\n                           + '</div>';\r\n                   }\r\n               },\r\n           controller: function($scope: any) {\r\n                $scope.tilesOptions = {\r\n                    gutter: 8,//16\r\n                    isFitWidth: false,\r\n                    isResizeBound: false,\r\n                    transitionDuration: 0 // '0.2s'\r\n                };\r\n           },\r\n           link: pipTilesController \r\n        };\r\n    });\r\n\r\n    function pipTilesController($scope: any, $element, $attrs: any) {\r\n        var\r\n            columnWidth = $attrs.columnWidth ? Math.floor($attrs.columnWidth) : 440,\r\n            container = $element.children('.pip-tiles-container'),\r\n            prevContainerWidth = null,\r\n            masonry = Masonry.data(container[0]);\r\n        \r\n        // Add class to the element\r\n        $element.addClass('pip-tiles');\r\n\r\n        // Insert sizer\r\n        var sizer = $('<div class=\"pip-tile-sizer\"></div>');\r\n        sizer.appendTo(container);\r\n\r\n        // Resize every time window is resized\r\n        $scope.$on('pipWindowResized', function () {\r\n            resize(false);\r\n        });\r\n\r\n        // Resize the element right away\r\n        resize(true);\r\n\r\n        return;\r\n\r\n        //---------------------\r\n\r\n        function resize(force) {\r\n            var\r\n                width = $('.pip-main').width(),\r\n                containerWidth;\r\n            \r\n            console.log('width', width);\r\n\r\n            if (width > 767) {\r\n                width = width - 24 * 2;\r\n\r\n                var columns = Math.floor(width / columnWidth);\r\n                containerWidth = (columnWidth + 16) * columns - 16;\r\n\r\n                if (containerWidth > width) {\r\n                    columns--;\r\n                    containerWidth = (columnWidth + 16) * columns - 16;\r\n                }\r\n\r\n                if (columns < 1) {\r\n                    containerWidth = width;\r\n                    sizer.css('width', containerWidth + 'px');\r\n                } else {\r\n                    sizer.css('width', columnWidth + 'px');\r\n                }\r\n\r\n                // +10 to avoid precision related error\r\n                container.css('width', (containerWidth + 10) + 'px');\r\n                container.removeClass('pip-mobile');\r\n            } else {\r\n                width = width - 16 * 2;\r\n                containerWidth = width;\r\n\r\n                sizer.css('width', containerWidth + 'px');\r\n                // +10 to avoid precision related error\r\n                container.css('width', (containerWidth + 10) + 'px');\r\n                container.addClass('pip-mobile');\r\n            }\r\n\r\n            // Manually call layout on tile container\r\n            if (prevContainerWidth != containerWidth || force) {\r\n                prevContainerWidth = containerWidth;\r\n                masonry.layout();\r\n\r\n                // Notify child controls that layout was resized\r\n                $scope.$broadcast('pipLayoutResized');\r\n            }\r\n        }\r\n    }\r\n\r\n    // Converts value into boolean\r\n    function convertToBoolean(value) {\r\n        if (value == null) return false;\r\n        if (!value) return false;\r\n        value = value.toString().toLowerCase();\r\n        return value == '1' || value == 'true';\r\n    };\r\n\r\n})();\r\n"]}