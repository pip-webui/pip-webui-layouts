{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/index.ts","src/layouts/AuxiliaryPanel.ts","src/layouts/CardDirective.ts","src/layouts/DialogDirective.ts","src/layouts/DocumentDirective.ts","src/layouts/MainDirective.ts","src/layouts/SimpleDirective.ts","src/layouts/TilesDirective.ts","src/media/MediaService.ts","src/media/ResizeFunctions.ts"],"names":["f","exports","module","define","amd","g","window","global","self","this","pip","layouts","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","angular","__export","auxiliaryPanelDirective","restrict","replace","controller","AuxiliaryPanelController","MediaService_1","AuxiliaryService","$rootScope","$compile","$mdSidenav","_$rootScope","_$compile","_$mdSidenav","opened","popoverTemplate","$inject","prototype","show","p","_this","scope","params","content","element","$","$new","_","isObject","locals","append","defaultsDeep","find","template","children","then","instance","open","hide","remove","close","isOpen","pipAuxPanel","_pipAuxPanel","isGtxs","Number","width","MainBreakpoints","xs","onCloseClick","service","../media/MediaService","3","cardDirective","link","$scope","$element","$attrs","CardDirectiveLink","_element","_rootScope","_attrs","addClass","listener","resize","$on","MainResizedEvent","setTimeout","left","top","$mainBody","cardContainer","maxWidth","maxHeight","height","minWidth","Math","floor","minHeight","MainBreakpointStatuses","space","min","css","hasClass","max","$header","$footer","$body","maxBodyHeight","outerHeight","$emit","directive","4","dialogDirective","5","documentDirective","6","ResizeFunctions_1","mainDirective","MainDirectiveController","controllerAs","mainBodyDirective","MainBodyDirectiveLink","$timeout","_timeout","addResizeListener","removeResizeListener","updateBreakpointStatuses","innerWidth","update","each","breakpoint","status","isBoolean","body","$apply","../media/ResizeFunctions","7","simpleDirective","8","tilesDirective","convertToBoolean","value","toString","toLowerCase","pipInfinite","String","tilesOptions","gutter","isFitWidth","isResizeBound","transitionDuration","TilesDirectiveLink","_columnWidth","columnWidth","_container","_prevContainerWidth","_masonry","Masonry","data","_sizer","appendTo","force","containerWidth","parent","log","columns","removeClass","layout","LayoutResizedEvent","9","MediaBreakpoints","sm","md","lg","MediaBreakpointStatuses","breakpoints","MediaProvider","get","set","configurable","$get","size","defineProperty","Object","provider","10","callback","frame","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","cancelFrame","cancel","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","clearTimeout","id","resizeListener","event","win","target","srcElement","__resizeRAF__","requestFrame","trigger","__resizeTrigger__","__resizeListeners__","forEach","fn","loadListener","contentDocument","defaultView","__resizeElement__","addEventListener","attachEvent","getComputedStyle","position","style","obj","document","createElement","setAttribute","onload","type","isIE","appendChild","push","splice","indexOf","detachEvent","removeEventListener","navigator","userAgent","match"],"mappings":"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","file":"pip-webui-layouts.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\r\n\r\nangular.module('pipLayout', ['wu.masonry']);\r\n\r\nimport './media/MediaService';\r\nimport './media/ResizeFunctions';\r\n\r\nimport './layouts/MainDirective';\r\nimport './layouts/CardDirective';\r\nimport './layouts/DialogDirective';\r\nimport './layouts/DocumentDirective';\r\nimport './layouts/SimpleDirective';\r\nimport './layouts/TilesDirective';\r\nimport './layouts/AuxiliaryPanel';\r\n\r\nexport * from './media/MediaService';\r\nexport * from './media/ResizeFunctions';","'use strict';\r\n\r\nimport { MainBreakpoints } from '../media/MediaService';\r\n\r\nclass AuxiliaryService {\r\n    private popoverTemplate: string;\r\n    private _$rootScope: ng.IRootScopeService;\r\n    private _$compile: ng.ICompileService;\r\n    private _$mdSidenav: angular.material.ISidenavService;\r\n    private opened: boolean;\r\n    private element: any;\r\n\r\n    public constructor(\r\n        $rootScope: ng.IRootScopeService,\r\n        $compile: ng.ICompileService,\r\n        $mdSidenav: angular.material.ISidenavService\r\n    ) {\r\n        this._$rootScope = $rootScope;\r\n        this._$compile = $compile;\r\n        this._$mdSidenav = $mdSidenav;\r\n        this.opened = false;\r\n\r\n        this.popoverTemplate = \"<div ng-controller='params.controller' class='for-scope'>\" +\r\n                                    \"<div ng-if='params.templateUrl' class='flex layout-column' ng-include='params.templateUrl'></div>\"\r\n                                \"</div>\";\r\n    }\r\n\r\n    public show(p: any) {\r\n        if (this.opened) return;\r\n\r\n        let scope, params, content;\r\n\r\n        this.element = $('md-sidenav.pip-aux-panel');\r\n        scope = this._$rootScope.$new();\r\n        params = p && _.isObject(p) ? p : {};\r\n        scope.params = params;\r\n        scope.locals = params.locals;\r\n        content = this._$compile(this.popoverTemplate)(scope);\r\n        this.element.append(content);\r\n        scope = _.defaultsDeep(scope, this.element.find('.for-scope').scope());\r\n\r\n        if (params.template) {\r\n            $(this.element.children()[1]).append(this._$compile(params.template)(scope));\r\n        }\r\n        \r\n        try {\r\n            this._$mdSidenav('pip-aux-panel', true).then((instance: any) => {\r\n                instance.open();\r\n                this.opened = true;\r\n            });\r\n        } catch(e) {\r\n            this._$mdSidenav('pip-aux-panel').open();\r\n            this.opened = true;\r\n        }\r\n    }\r\n\r\n    public hide() {\r\n        $(this.element.children()[1]).remove();\r\n        this.opened = false;\r\n        this._$mdSidenav('pip-aux-panel').close();\r\n    }\r\n\r\n    public isOpen():boolean {\r\n        return this.opened;\r\n    }\r\n}\r\n\r\nclass AuxiliaryPanelController {\r\n    private _pipAuxPanel: AuxiliaryService;\r\n\r\n    public constructor(pipAuxPanel: AuxiliaryService) {\r\n        this._pipAuxPanel = pipAuxPanel;\r\n    }\r\n\r\n    public isGtxs():boolean {\r\n        return Number($('body').width()) > MainBreakpoints.xs && this._pipAuxPanel.isOpen();\r\n    }\r\n\r\n    public onCloseClick() {\r\n        this._pipAuxPanel.hide();\r\n    }\r\n}\r\n\r\nfunction auxiliaryPanelDirective() {\r\n    return {\r\n        restrict: 'E',\r\n        replace: true,\r\n        controller: AuxiliaryPanelController,\r\n        controllerAs: 'vm',\r\n        template: '<md-sidenav class=\"md-sidenav-right md-whiteframe-z2 pip-aux-panel color-content-bg\"' + \r\n                    'md-component-id=\"pip-aux-panel\" md-is-locked-open=\"vm.isGtxs()\" pip-focused>' + \r\n                    '<div class=\"close-button\" ng-click=\"vm.onCloseClick()\" ><md-icon md-svg-icon=\"icons:cross\"></md-icon></div></md-sidenav>'\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipLayout')\r\n    .directive('pipAuxPanel', auxiliaryPanelDirective)\r\n    .service('pipAuxPanel', AuxiliaryService);\r\n","'use strict';\r\n\r\nimport { MainResizedEvent, LayoutResizedEvent, MainBreakpointStatuses } from '../media/MediaService';\r\n\r\n// Avoid default export\r\n(() => {\r\n\r\nclass CardDirectiveLink {\r\n    private _element: any;\r\n    private _attrs: any;\r\n    private _rootScope: ng.IRootScopeService;\r\n\r\n    public constructor($rootScope: ng.IRootScopeService, $element: any, $attrs: any) {\r\n        this._element = $element;\r\n        this._rootScope = $rootScope;\r\n        this._attrs = $attrs;\r\n\r\n        // Add class to the element\r\n        $element.addClass('pip-card');\r\n\r\n        let listener = () => { this.resize(); }\r\n\r\n        // Resize every time window is resized\r\n        $rootScope.$on(MainResizedEvent, listener);\r\n\r\n        // Resize right away to avoid flicking\r\n        this.resize();\r\n\r\n        // Resize the element right away\r\n        setTimeout(listener, 100);\r\n    }\r\n\r\n    private resize() {\r\n        var\r\n            $mainBody = $('.pip-main-body'),\r\n            cardContainer = $('.pip-card-container'),\r\n            windowWidth = $('pip-main').width(),\r\n            maxWidth = $mainBody.width(),\r\n            maxHeight = $mainBody.height(),\r\n            minWidth = this._attrs.minWidth ? Math.floor(this._attrs.minWidth) : null,\r\n            minHeight = this._attrs.minHeight ? Math.floor(this._attrs.minHeight) : null,\r\n            width = this._attrs.width ? Math.floor(this._attrs.width) : null,\r\n            height = this._attrs.height ? Math.floor(this._attrs.height) : null,\r\n            left, top;\r\n\r\n        // Full-screen on phone\r\n        if (MainBreakpointStatuses.xs) {\r\n            minWidth = null;\r\n            minHeight = null;\r\n            width = null;\r\n            height = null;\r\n            maxWidth = null;\r\n            maxHeight = null;\r\n        }\r\n        // Card view with adjustable margins on tablet and desktop\r\n        else {\r\n            // Set margin and maximum dimensions\r\n            var space = MainBreakpointStatuses['gt-md'] ? 24 : 16;\r\n            maxWidth -= space * 2;\r\n            maxHeight -= space * 2;\r\n\r\n            // Set minimum dimensions\r\n            minWidth = minWidth ? Math.min(minWidth, maxWidth) : null;\r\n            minHeight = minHeight ? Math.min(minHeight, maxHeight) : null;\r\n\r\n            // Set regular dimensions\r\n            width = width ? Math.min(width, maxWidth) : null;\r\n            height = height ? Math.min(height, maxHeight) : null;\r\n        }\r\n\r\n        // Set dimensions\r\n        this._element.css('max-width', maxWidth ? maxWidth + 'px' : '');\r\n        this._element.css('min-width', minWidth ? minWidth + 'px' : '');\r\n        this._element.css('width', width ? width + 'px' : '');\r\n        this._element.css('height', height ? height + 'px' : '');\r\n\r\n        if (!cardContainer.hasClass('pip-outer-scroll')) {\r\n            this._element.css('max-height', maxHeight ? maxHeight + 'px' : '');\r\n            this._element.css('min-height', minHeight ? minHeight + 'px' : '');\r\n            var\r\n                $header = this._element.find('.pip-header:visible'),\r\n                $footer = this._element.find('.pip-footer:visible'),\r\n                $body = this._element.find('.pip-body'),\r\n                maxBodyHeight = maxHeight || $mainBody.height();\r\n\r\n            if ($header.length > 0)\r\n                maxBodyHeight -= $header.outerHeight(true);\r\n            if ($footer.length > 0)\r\n                maxBodyHeight -= $footer.outerHeight(true);\r\n\r\n            $body.css('max-height', maxBodyHeight + 'px');\r\n        } else {\r\n            cardContainer.addClass('pip-scroll');\r\n            if (MainBreakpointStatuses.xs) {\r\n                left = 0;\r\n                top = 0;\r\n            } else {\r\n                left = cardContainer.width() / 2 - this._element.width() / 2 - 16;\r\n                top = Math.max(cardContainer.height() / 2 - this._element.height() / 2 - 16, 0);\r\n            }\r\n\r\n            this._element.css('left', left);\r\n            this._element.css('top', top);\r\n\r\n            setTimeout(() => { this._element.css('display', 'flex'); }, 100);\r\n        }\r\n\r\n        // Notify child controls that layout was resized\r\n        this._rootScope.$emit('pipLayoutResized');\r\n    }\r\n}\r\n\r\nfunction cardDirective($rootScope: ng.IRootScopeService) {\r\n    \"ngInject\";\r\n\r\n    return {\r\n        restrict: 'EA',\r\n        link: ($scope, $element, $attrs) => {\r\n            new CardDirectiveLink($rootScope, $element, $attrs);\r\n        }\r\n    }\r\n}\r\n\r\n\r\nangular\r\n    .module('pipLayout')\r\n    .directive('pipCard', cardDirective);\r\n\r\n})();","'use strict';\r\n\r\n// Avoid default export\r\n(() => {\r\n\r\nfunction dialogDirective() {\r\n    return {\r\n        restrict: 'EA',\r\n        link: ($scope, $element, $attrs) => {\r\n            $element.addClass('pip-dialog');\r\n        }\r\n    };\r\n}\r\n\r\nangular\r\n    .module('pipLayout')\r\n    .directive('pipDialog', dialogDirective);\r\n\r\n})();","'use strict';\r\n\r\n// Avoid default export\r\n(() => {\r\n\r\nfunction documentDirective() {\r\n    return {\r\n        restrict: 'EA',\r\n        link: ($scope, $element, $attrs) => {\r\n            $element.addClass('pip-document');\r\n        }\r\n    };\r\n}\r\n\r\nangular\r\n    .module('pipLayout')\r\n    .directive('pipDocument', documentDirective);\r\n\r\n})();","'use strict';\r\n\r\nimport { addResizeListener, removeResizeListener } from '../media/ResizeFunctions';\r\nimport { MainBreakpoints, MainBreakpointStatuses, MainResizedEvent } from '../media/MediaService'; \r\n\r\n// Avoid default export\r\n(() => {\r\n\r\nclass MainDirectiveController {\r\n    private _element: any;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _timeout: ng.ITimeoutService;\r\n\r\n    public constructor(\r\n        $scope: ng.IScope, \r\n        $element: any, \r\n        $rootScope: ng.IRootScopeService,\r\n        $timeout: ng.ITimeoutService\r\n    ) {\r\n        this._element = $element;        \r\n        this._rootScope = $rootScope;\r\n        this._timeout = $timeout;\r\n\r\n        // Add CSS class\r\n        $element.addClass('pip-main');\r\n\r\n        // Add resize listener\r\n        let listener = () => { this.resize(); };\r\n        addResizeListener($element[0], listener);\r\n\r\n        // Unbind when scope is removed\r\n        $scope.$on('$destroy', () => {\r\n            removeResizeListener($element[0], listener);\r\n        });\r\n\r\n        // Perform initial calculations\r\n        this.updateBreakpointStatuses();\r\n    }\r\n\r\n    private updateBreakpointStatuses() {\r\n        let width = this._element.innerWidth();\r\n        let body = $('body');\r\n\r\n        MainBreakpointStatuses.update(MainBreakpoints, width);\r\n\r\n        $.each(MainBreakpointStatuses, (breakpoint, status) => {\r\n            if (_.isBoolean(status))\r\n                body[status ? 'addClass': 'removeClass']('pip-' + breakpoint);\r\n        });\r\n\r\n        this._timeout(() => {\r\n            this._rootScope.$apply();\r\n        });\r\n    }\r\n    \r\n    private resize() {\r\n        this.updateBreakpointStatuses();\r\n        this._rootScope.$emit(MainResizedEvent, MainBreakpointStatuses);\r\n    }\r\n}\r\n\r\nclass MainBodyDirectiveLink {\r\n    public constructor(\r\n        $scope: ng.IScope, \r\n        $element: any\r\n    ) {\r\n        // Add CSS class\r\n        $element.addClass('pip-main-body');\r\n    }\r\n}\r\n\r\nfunction mainDirective() {\r\n    return {\r\n        restrict: 'EA',\r\n        controller: MainDirectiveController,\r\n        controllerAs: 'vm' \r\n    }\r\n}\r\n\r\nfunction mainBodyDirective() {\r\n    return {\r\n        restrict: 'EA',\r\n        link: MainBodyDirectiveLink\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipLayout')\r\n    .directive('pipMain', mainDirective)\r\n    .directive('pipMainBody', mainBodyDirective);\r\n\r\n})();","'use strict';\r\n\r\n// Avoid default export\r\n(() => {\r\n\r\nfunction simpleDirective() {\r\n    return {\r\n        restrict: 'EA',\r\n        link: ($scope, $element, $attrs) => {\r\n            $element.addClass('pip-simple');\r\n        }\r\n    };\r\n}\r\n\r\nangular\r\n    .module('pipLayout')\r\n    .directive('pipSimple', simpleDirective);\r\n\r\n})();","'use strict';\r\n\r\nimport { addResizeListener, removeResizeListener } from '../media/ResizeFunctions';\r\nimport { MainResizedEvent, LayoutResizedEvent, MainBreakpoints, MainBreakpointStatuses } from '../media/MediaService';\r\n\r\ndeclare var Masonry: any;\r\n\r\nclass TilesDirectiveLink {\r\n    private _element: any;\r\n    private _attrs: any;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _columnWidth: number;\r\n    private _container: any;\r\n    private _prevContainerWidth: number;\r\n    private _masonry: any;\r\n    private _sizer: any;\r\n\r\n    public constructor($scope: ng.IScope, $element: any, $rootScope: ng.IRootScopeService, $attrs: any) {\r\n        this._element = $element;\r\n        this._rootScope = $rootScope;\r\n        this._attrs = $attrs;\r\n\r\n        this._columnWidth = $attrs.columnWidth ? Math.floor($attrs.columnWidth) : 440,\r\n        this._container = $element.children('.pip-tiles-container'),\r\n        this._prevContainerWidth = null,\r\n        this._masonry = Masonry.data(this._container[0]);\r\n        \r\n        // Add class to the element\r\n        $element.addClass('pip-tiles');\r\n\r\n        // Add resize listener\r\n        let listener = () => { this.resize(false); };\r\n        addResizeListener($element[0], listener);\r\n\r\n        // Unbind when scope is removed\r\n        $scope.$on('$destroy', () => {\r\n            removeResizeListener($element[0], listener);\r\n        });\r\n\r\n        // Insert sizer\r\n        this._sizer = $('<div class=\"pip-tile-sizer\"></div>');\r\n        this._sizer.appendTo(this._container);\r\n\r\n        // Resize every time window is resized\r\n        $rootScope.$on(MainResizedEvent, () => { this.resize(false); });\r\n\r\n        // Resize the element right away\r\n        this.resize(true);\r\n    }\r\n\r\n    private resize(force: boolean) {\r\n        let width = this._element.parent().width();\r\n        let containerWidth;\r\n        \r\n        console.log();\r\n\r\n        if (MainBreakpointStatuses['gt-xs'] && (width - 36) > this._columnWidth) {\r\n            width = width - 24 * 2;\r\n\r\n            let columns = Math.floor(width / this._columnWidth);\r\n            containerWidth = (this._columnWidth + 16) * columns - 16;\r\n\r\n            if (containerWidth > width) {\r\n                columns--;\r\n                containerWidth = (this._columnWidth + 16) * columns - 16;\r\n            }\r\n\r\n            if (columns < 1) {\r\n                containerWidth = width;\r\n                this._sizer.css('width', containerWidth + 'px');\r\n            } else {\r\n                this._sizer.css('width', this._columnWidth + 'px');\r\n            }\r\n\r\n            // +10 to avoid precision related error\r\n            this._container.css('width', (containerWidth + 10) + 'px');\r\n            this._container.removeClass('pip-mobile');\r\n        } else {\r\n            width = width - 16 * 2;\r\n            containerWidth = width;\r\n\r\n            this._sizer.css('width', containerWidth + 'px');\r\n            // +10 to avoid precision related error\r\n            this._container.css('width', (containerWidth + 10) + 'px');\r\n            this._container.addClass('pip-mobile');\r\n        }\r\n\r\n        // Manually call layout on tile container\r\n        if (this._prevContainerWidth != containerWidth || force) {\r\n            this._prevContainerWidth = containerWidth;\r\n            this._masonry.layout();\r\n\r\n            // Notify child controls that layout was resized\r\n            this._rootScope.$emit(LayoutResizedEvent);\r\n        }\r\n    }\r\n}\r\n\r\nfunction tilesDirective($rootScope: ng.IRootScopeService) {\r\n    \"ngInject\";\r\n\r\n    // Converts value into boolean\r\n    function convertToBoolean(value) {\r\n        if (value == null) return false;\r\n        if (!value) return false;\r\n        value = value.toString().toLowerCase();\r\n        return value == '1' || value == 'true';\r\n    }\r\n\r\n    return {\r\n        restrict: 'EA',\r\n        scope: false,\r\n        transclude: true,\r\n        template:\r\n            ($element: any, $attrs: any) => {\r\n                if (convertToBoolean($attrs.pipInfinite)) {\r\n                    return String()\r\n                    + '<div masonry class=\"pip-tiles-container\" load-images=\"false\" preserve-order  '\r\n                    + ' ng-transclude column-width=\".pip-tile-sizer\" item-selector=\".pip-tile\"'\r\n                    + ' masonry-options=\"tilesOptions\"  pip-scroll-container=\"\\'.pip-tiles\\'\"'\r\n                    + ' pip-infinite-scroll=\"readScroll()\" >'\r\n                    + '</div>';\r\n                } else {\r\n                    return String()\r\n                        + '<div masonry class=\"pip-tiles-container\" load-images=\"false\" preserve-order  '\r\n                        + ' ng-transclude column-width=\".pip-tile-sizer\" item-selector=\".pip-tile\"'\r\n                        + ' masonry-options=\"tilesOptions\">'\r\n                        + '</div>';\r\n                }\r\n            },\r\n        controller: ($scope: any) => {\r\n            $scope.tilesOptions = {\r\n                gutter: 8,//16\r\n                isFitWidth: false,\r\n                isResizeBound: false,\r\n                transitionDuration: 0 // '0.2s'\r\n            };\r\n        },\r\n        link: ($scope, $element, $attrs) => {\r\n            new TilesDirectiveLink($scope, $element, $rootScope, $attrs);\r\n        } \r\n    };\r\n}\r\n\r\nangular\r\n    .module('pipLayout')\r\n    .directive('pipTiles', tilesDirective);\r\n","'use strict';\r\n\r\nexport class MediaBreakpoints {\r\n    public constructor(\r\n        xs: number, sm: number, md: number, lg: number\r\n    ) {\r\n        this.xs = xs;\r\n        this.sm = sm;\r\n        this.md = md;\r\n        this.lg = lg;\r\n    }\r\n\r\n    public xs: number;\r\n    public sm: number;\r\n    public md: number;\r\n    public lg: number;\r\n}\r\n\r\nexport class MediaBreakpointStatuses {\r\n    public width: number;\r\n    public 'xs': boolean;\r\n    public 'gt-xs': boolean;\r\n    public 'sm': boolean;\r\n    public 'gt-sm': boolean;\r\n    public 'md': boolean;\r\n    public 'gt-md': boolean;\r\n    public 'lg': boolean;\r\n    public 'gt-lg': boolean;\r\n    public 'xl': boolean;\r\n\r\n    public update(breakpoints: MediaBreakpoints, width: number) {\r\n        if (breakpoints == null) return;\r\n\r\n        this.width = width;\r\n        this['xs'] = width <= breakpoints.xs;\r\n        this['gt-xs'] = width > breakpoints.xs;\r\n        this['sm'] = width > breakpoints.xs && width <= breakpoints.sm;\r\n        this['gt-sm'] = width > breakpoints.sm;\r\n        this['md'] = width > breakpoints.sm && width <= breakpoints.md;\r\n        this['gt-md'] = width > breakpoints.md;\r\n        this['lg'] = width > breakpoints.md && width <= breakpoints.lg;\r\n        this['gt-lg'] = width > breakpoints.lg;\r\n        this['xl'] = this['gt-lg'];\r\n    }\r\n}\r\n\r\nexport let MainResizedEvent: string = 'pipMainResized';\r\nexport let LayoutResizedEvent: string = 'pipLayoutResized';\r\n\r\nexport let MainBreakpoints: MediaBreakpoints = new MediaBreakpoints(639, 1110, 1220, 1599);\r\nexport let MainBreakpointStatuses: MediaBreakpointStatuses = new MediaBreakpointStatuses();\r\n\r\nexport interface IMediaService {\r\n    (breakpoint: string): boolean;\r\n    breakpoints: MediaBreakpoints;\r\n    width: number;\r\n} \r\n\r\nexport interface IMediaProvider extends ng.IServiceProvider {\r\n    breakpoints: MediaBreakpoints;\r\n}\r\n\r\nclass MediaProvider {\r\n    public get breakpoints(): MediaBreakpoints {\r\n        return MainBreakpoints;\r\n    }\r\n\r\n    public set breakpoints(value: MediaBreakpoints) {\r\n        MainBreakpoints = value;\r\n    }\r\n\r\n    public $get() {\r\n        let service = function(size) {\r\n            return MainBreakpointStatuses[size];\r\n        }\r\n\r\n        Object.defineProperty(service, 'breakpoints', {\r\n            get: () => { return MainBreakpoints; },\r\n            set: (value) => { \r\n                MainBreakpoints = value || new MediaBreakpoints(639, 1110, 1220, 1599);\r\n                \r\n                MainBreakpointStatuses.update(\r\n                    MainBreakpoints, \r\n                    MainBreakpointStatuses.width\r\n                );\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(service, 'width', {\r\n            get: () => { \r\n                return MainBreakpointStatuses.width; \r\n            }\r\n        });\r\n\r\n        return service; \r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipLayout')\r\n    .provider('pipMedia', MediaProvider);\r\n","'use strict';\r\n\r\nlet attachEvent = (<any>document).attachEvent;\r\nlet isIE = navigator.userAgent.match(/Trident/);\r\n\r\nfunction requestFrame(callback): any {\r\n    let frame = window.requestAnimationFrame \r\n        || (<any>window).mozRequestAnimationFrame \r\n        || (<any>window).webkitRequestAnimationFrame \r\n        || function(callback) { \r\n            return window.setTimeout(callback, 20);     \r\n        };\r\n\r\n    return frame(callback);\r\n}\r\n\r\nfunction cancelFrame(): any {\r\n    let cancel = window.cancelAnimationFrame \r\n        || (<any>window).mozCancelAnimationFrame \r\n        || (<any>window).webkitCancelAnimationFrame \r\n        || window.clearTimeout;\r\n\r\n    return function(id) { \r\n        return cancel(id); \r\n    };\r\n}\r\n\r\nfunction resizeListener(event: any): void {\r\n    var win = event.target || event.srcElement;\r\n    if (win.__resizeRAF__) cancelFrame(/*win.__resizeRAF__*/);\r\n    win.__resizeRAF__ = requestFrame(function() {\r\n        var trigger = win.__resizeTrigger__;\r\n        trigger.__resizeListeners__.forEach(function(fn){\r\n            fn.call(trigger, event);\r\n        });\r\n    });\r\n}\r\n\r\nfunction loadListener(event: any): void {\r\n    this.contentDocument.defaultView.__resizeTrigger__ = this.__resizeElement__;\r\n    this.contentDocument.defaultView.addEventListener('resize', resizeListener);\r\n}\r\n\r\nexport function addResizeListener(element, listener): void {\r\n    if (!element.__resizeListeners__) {\r\n        element.__resizeListeners__ = [];\r\n        if (attachEvent) {\r\n            element.__resizeTrigger__ = element;\r\n            element.attachEvent('onresize', resizeListener);\r\n        }\r\n        else {\r\n            if (getComputedStyle(element).position == 'static') element.style.position = 'relative';\r\n            var obj: any = element.__resizeTrigger__ = document.createElement('object');\r\n            obj.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;');\r\n            obj.__resizeElement__ = element;\r\n            obj.onload = loadListener;\r\n            obj.type = 'text/html';\r\n            if (isIE) element.appendChild(obj);\r\n            obj.data = 'about:blank';\r\n            if (!isIE) element.appendChild(obj);\r\n        }\r\n    }\r\n\r\n    element.__resizeListeners__.push(listener);\r\n}\r\n\r\nexport function removeResizeListener(element, listener): void {\r\n    if (listener) element.__resizeListeners__.splice(element.__resizeListeners__.indexOf(listener), 1);\r\n    if (!element.__resizeListeners__.length) {\r\n        if (attachEvent) element.detachEvent('onresize', resizeListener);\r\n        else {\r\n            element.__resizeTrigger__.contentDocument.defaultView.removeEventListener('resize', resizeListener);\r\n            element.__resizeTrigger__ = !element.removeChild(element.__resizeTrigger__);\r\n        }\r\n    }\r\n}\r\n"]}